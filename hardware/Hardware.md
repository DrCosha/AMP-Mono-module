## Amplifiler control unit - hardware parts

В данной части будут приведены схемы и печатные платы, касающиеся модуля управления и его исполнительных и контрольных узлов.
Схема самого усилителя, основного блока питания и индикации остается для самостоятельной реализации.

## Cхема модуля управления

<div align="center"><img alt="Overview" width="800" src="/images/ACU_main_circuit_short.png" />&emsp;&emsp;&emsp;</div>

Общий вид 3D модели платы:

<div align="center"><img alt="Overview" width="600" src="/images/3D_acu_pcb_view.png" />&emsp;&emsp;&emsp;</div>

Собранная плата выглядит следующим образом:

<div align="center"><img alt="Overview" width="600" src="/images/acu_assembled_view.png" />&emsp;&emsp;&emsp;</div>

<br/>
<br/>

Основные сигналы модуля выведены на следующие разъемы:

|Номер разъема|Назначение|Распиновка|
|-------------|----------|----------|
|H1|`FLASH` - Разъем для подключения к порту TTL RS232, для перепрошивки модуля управления.| 1-**+3,3V**; 2-**TxD**; 3-**RxD**; 4-**GND**|
|JP1|`TRIG_IN` - Trigger IN - входящий сигнал внешнего включения. Уровень сигнала +5..12В. Потребляемый ток до 20mA. | 1-**GND**; 2-**NC**; 3-**trig_in**|
|JP2|`TRIG_OUT` - Trigger OUT - исходящий сигнал для включения дочерних устройств. +12В, нагрузка до 100mA| 1-**GND**; 2-**NC**; 3-**trig_out**|
|JP3|`1Wire` - Шина OneWire - однопроводная шина Peer2Peer для синхронизации модулей между собой. До 10 устройств на одной шине.| 1-**GND**; 2-**NC**; 3-**1Wire**|
|N1|`VU_Mute` - Сигнал выключения модуля стрелочной индикации в моменты включения/выключения усилителя для подавления переходных процессов. [^1]| 1-**VU_Mute**; 2-**GND**|
|N3|`LED_PWM` - Питание подсветки стрелочного индикатора. PWM сигнал напряжением +12V. Управление по шине GND.| 1-**+12V**; 2-**PWM**|  
|N4|`SELECTOR` - Сигнал управления реле с обмоткой расчитанной на 5V. Переключение реле выбирает XLR или RCA вход.| 1-**+5V**; 2-**SELECT**|
|CN1|`POWER` - Разъем подачи основного питания +12V на модуль управления и возврата сигнала **power_relay** на плату блока питания. Сигнал управляет включением основного силового реле усилителя и подачей питания на платы защиты АС.[^1]| 1-**power_relay**; 2..3-**+12V**; 4..5-**GND**|
|CN4|`MAIN PANEL` - Разъем подключения платы трехцветного LED индикатора питания и кнопки `POWER` на лицевой панели.| 1-**LED_RED**; 2-**LED_BLUE**; 3-**LED_GREEN**; 4-**GND**; 5-**power_bttn**|
|CN5|`SELECT PANEL` - Разъем подключения платы индикации селектора входов, кнопки управления селектором, и кнопки выбора режима подсветки стрелочного индикатора. Рядом с кнопками расположен датчик внешней освещенности, для автоматического режима подсветки.| 1-**LED_XLR**; 2-**ILUM_BTTN**; 3-**SEL_BTTN**; 4-**ILUM_SENS**; 5-**LED_RCA**; 6..7-**GND**; 8-**+5V**|

[^1]: Внимание: Сигнал является прымым выходом GPIO микроконтроллера и не должен нагружатся более чем на 20mA!

<br/>

## Модуль standby питания и основное силовое реле

<div align="center"><img alt="Overview" width="800" src="/images/p&r_circuits_short.png" />&emsp;&emsp;&emsp;</div>
<br/>
<br/>

Основные сигналы модуля выведены на следующие разъемы:

|Номер разъема|Назначение|Распиновка|
|-------------|----------|----------|
|P1|`POWER` - Вход ~220V. ***Провод заземления не используется!!!*** | 1-**N**; 2-**L**|
|P2;P3|`MAIN_RELAY` - Выход ~220V на главные блоки питания. Защищены предохранителем **5A**| 1-**L**; 2-**N**|
|CN2|`CPU_POWER` - Ответный разъем для CN1 на основной плате модуля управления. Разъем подачи основного питания +12V на модуль управления и возврата сигнала **power_relay** на плату блока питания. Сигнал управляет включением основного силового реле усилителя и подачей питания на платы защиты АС.[^1]| 1-**power_relay**; 2..3-**+12V**; 4..5-**GND**|
|N2|`ACC_PROTECT` - Разъем подачи +12V на модуль защиты акустических систем при общем включении усилителя.| 1-**+12V**; 2-**GND**|
<br/>
<br/>


## Схемы плат индикации и контроля

<div align="center"><img height="250" src="/images/power_panel_short.png"/>&emsp; <img height="250" src="/images/selector_panel_short.png"/></div>




Общее описание и настройки здесь: [README.md](https://github.com/DrCosha/AMP-Mono-module/blob/master/README.md)
